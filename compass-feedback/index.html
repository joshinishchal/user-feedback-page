<!DOCTYPE html>
<html lang="en" data-ng-app="feedbackApp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Feedback Page</title>

    <!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="../compass-feedback/extras/bootstrap.4.0.min.css"> -->

	<link rel="stylesheet" href="./stylesheets/style.css">
    <link rel="stylesheet" href="./stylesheets/dist/angular-busy.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-78447148-1', 'auto');
        ga('send', 'pageview');
        ga(function(tracker) {
            ga.clientId = tracker.get('clientId');
            ga('set','userId',ga.clientId);
            ga('send','event','Web Club 360 View Tickets', 'opened-web',ga.clientId,1)
        });
    </script>
  </head>
  <body>

      <div data-ng-controller="reportController" data-ng-init="">
            <div cg-busy="cgBusyPromise" class="container">
                <div id="container" class="container" data-ng-show="!$cgBusyIsActive()">

                <div class="row locationName-row">
                    <!--// name of the club-->
                    <div class="col-xs-12 locationName-col">
                        <h4 id="locationName" class="whiteText text-xs-center" data-ng-bind="overView.locationName + ' (' + (getDateObject(startDate) | date:'MMM dd') + ' - ' + (getDateObject(endDate) | date:'MMM dd') + ')'"></h4>
                    </div>
                </div>

                <div class="row ">
                <!-- Div to show highlights -->

                    <div class="col-xs-12 card text-xs-center highlight singleHighlight">
                        <p class="card-text whiteText">Approval Ratings</p>
                        <div class="card-text">
                            <h3 class="card-title darkGreenTextColor text-xs-center" data-ng-bind="getApprovalRating(getTotalCustomers(rootNode[brandName][locationUUID]['detailedReports'][reportId]['happyCustomers']),getTotalCustomers(rootNode[brandName][locationUUID]['detailedReports'][reportId]['unHappyCustomers']))"><!--<span class="card-text whiteText pull-xs-right pull-sm-right pull-md-right pull-lg-right perdiff" data-ng-hide="getTotalTodaysReviews()==0">+2.3%</span>--></h3>
                        </div>
                        <p class="card-text whiteText" data-ng-bind="getTotalReviewersText()"></p>
                    </div>

                    <!-- <div class="col-xs-4 card text-xs-center highlight rightHighlight" data-ng-hide="true">
                        <p class="card-text whiteText">All-Time</p>
                        <h3 class="card-title whiteText" data-ng-bind="getAvgAllTimeScore(overView)"></h3>
                        <p class="card-text whiteText" data-ng-bind="'from ' + getTotalAllTimeReview(overView) + ' reviews'"></p>
                    </div> -->

                </div>

                <div class="row">
                    <a href="{{getFeedbackAppURL(brandName,locationUUID)}}">
                        <div class="card reportFeedbackAppBtn btn btn-danger col-lg-12 col-sm-12 col-md-12 col-xs-12 text-xs-center">Check Latest Reviews</div>
                    </a>
                </div>

                <div class="row">
                    <h4 class="btn whiteText feedbackAppButton">Happy Members</h4>
                    <table class="reportTable table table-bordered table-condensed">
                        <tr class="card-header">
                            <th>Name</th>
                            <th>Trend</th>
                            <th>Email</th>
                            <th>Phone</th>
                        </tr>
                        <tbody data-ng-repeat="(indexa,trend) in rootNode[brandName][locationUUID]['detailedReports'][reportId]['trends']" class="reportTableBody">
                            <tr data-ng-repeat="(indexb,user) in rootNode[brandName][locationUUID]['detailedReports'][reportId]['happyCustomers'][trend]">
                                <td data-ng-bind="rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_first_name'] + ' ' + rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_last_name']"></td>
                                <td data-ng-bind="trend"></td>
                                <td>
                                    <button type="button" class="btn btn-secondary text-muted clear" data-ng-click="email = getEmailText(rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_email'],'');npDisplay='npDisplay';reportEmailClick(feedback.review_date_mil_time_in_pst,feedback.netpulse_exerciser_UUID);" data-ng-hide="!isPhoneEmailAvailable(rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_email'])" data-ng-bind="emailText"></button>
                                    <p class="clear" data-ng-bind="email"></p>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-secondary text-muted clear" data-ng-click="call = getPhoneText(rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_phone'],'');npDisplay='npDisplay';reportCallClick(feedback.review_date_mil_time_in_pst,feedback.netpulse_exerciser_UUID);" data-ng-hide="!isPhoneEmailAvailable(rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_phone'])" data-ng-bind="callText"></button>
                                    <p class="clear" data-ng-bind="call"></p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="row">
                    <h4 class="btn whiteText feedbackAppButton">Unhappy Members</h4>
                    <table class="reportTable table table-bordered table-condensed">
                        <tr class="card-header">
                            <th>Name</th>
                            <th>Trend</th>
                            <th>Email</th>
                            <th>Phone</th>
                        </tr>
                        <tbody data-ng-repeat="(indexa,trend) in rootNode[brandName][locationUUID]['detailedReports'][reportId]['trends']" class="reportTableBody">
                            <tr data-ng-repeat="(indexb,user) in rootNode[brandName][locationUUID]['detailedReports'][reportId]['unHappyCustomers'][trend]">
                                <td data-ng-bind="rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_first_name'] + ' ' + rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_last_name']"></td>
                                <td data-ng-bind="trend"></td>
                                <td>
                                    <button type="button" class="btn btn-secondary text-muted clear" data-ng-click="email = getEmailText(rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_email'],'');npDisplay='npDisplay';reportEmailClick(feedback.review_date_mil_time_in_pst,feedback.netpulse_exerciser_UUID);" data-ng-hide="!isPhoneEmailAvailable(rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_email'])" data-ng-bind="emailText"></button>
                                    <p class="clear" data-ng-bind="email"></p>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-secondary text-muted clear" data-ng-click="call = getPhoneText(rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_phone'],'');npDisplay='npDisplay';reportCallClick(feedback.review_date_mil_time_in_pst,feedback.netpulse_exerciser_UUID);" data-ng-hide="!isPhoneEmailAvailable(rootNode[brandName][locationUUID]['detailedReports'][reportId]['uniqueUsers'][user]['user_phone'])" data-ng-bind="callText"></button>
                                    <p class="clear" data-ng-bind="call"></p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="row">
                        <h4 data-ng-hide="rootNode[brandName][locationUUID]['detailedReports'][reportId]['allFeedbacks'].length == 0" data-ng-init="" class=" btn whiteText feedbackAppButton">Word on the Street</h4>
                        <div class="row npComplainCard npReportComplainCard" data-ng-repeat="comment in rootNode[brandName][locationUUID]['detailedReports'][reportId]['allFeedbacks']">
                            <div class="card col-xs-12" data-ng-init="">
                                <div class="card-header">
                                    <p class="customer pull-xs-left pull-sm-left pull-md-left pull-lg-left">
                                        <span class="customerName" data-ng-bind="reportFeedbacks[comment['date']][comment['feedbackId']].user_first_name + ' ' + reportFeedbacks[comment['date']][comment['feedbackId']].user_last_name"></span>
                                        <span class="visitDate text-danger" data-ng-bind="'Visited: ' + (getVisitedDateObject(reportFeedbacks[comment['date']][comment['feedbackId']].visit_date_mil_time_in_pst)|date:'EEE, MMM d')"></span>
                                        <!--//{{getVisitedDateObject(reportFeedbacks[comment['date']][comment['feedbackId']].visit_date_mil_time_in_pst) | date : 'EEEE, MMMM d'}}-->
                                    </p>
                                    <p class="visitRating pull-xs-right pull-sm-right pull-md-right pull-lg-right {{getStarBGClass(reportFeedbacks[comment['date']][comment['feedbackId']].rating)}}">
                                        <span class="star text-xs-center text-sm-center text-md-center text-lg-center vertical" data-ng-bind="reportFeedbacks[comment['date']][comment['feedbackId']].rating"></span><img class="imgStar" alt="star" src="images/Star.svg">
                                    </p>
                                </div>
                                <p class="text-xs-center reasons" data-ng-hide="getReasons(reportFeedbacks[comment['date']][comment['feedbackId']].reason_1,reportFeedbacks[comment['date']][comment['feedbackId']].reason_2,reportFeedbacks[comment['date']][comment['feedbackId']].reason_3,reportFeedbacks[comment['date']][comment['feedbackId']].reason_4,reportFeedbacks[comment['date']][comment['feedbackId']].reason_5,reportFeedbacks[comment['date']][comment['feedbackId']].reason_6).length == 0">
                                    <span class="service text-danger text-xs-center text-sm-center text-md-center text-lg-center" data-ng-bind="getReasons(reportFeedbacks[comment['date']][comment['feedbackId']].reason_1,reportFeedbacks[comment['date']][comment['feedbackId']].reason_2,reportFeedbacks[comment['date']][comment['feedbackId']].reason_3,reportFeedbacks[comment['date']][comment['feedbackId']].reason_4,reportFeedbacks[comment['date']][comment['feedbackId']].reason_5,reportFeedbacks[comment['date']][comment['feedbackId']].reason_6)"></span>
                                </p>
                                <hr class="" data-ng-hide="getReasons(reportFeedbacks[comment['date']][comment['feedbackId']].reason_1,reportFeedbacks[comment['date']][comment['feedbackId']].reason_2,reportFeedbacks[comment['date']][comment['feedbackId']].reason_3,reportFeedbacks[comment['date']][comment['feedbackId']].reason_4,reportFeedbacks[comment['date']][comment['feedbackId']].reason_5,reportFeedbacks[comment['date']][comment['feedbackId']].reason_6).length == 0">
                                <div class="card-block">
                                    <blockquote class="card-blockquote" data-ng-hide="isThereNoComment(reportFeedbacks[comment['date']][comment['feedbackId']].comment.length)">
                                        <p data-ng-bind="reportFeedbacks[comment['date']][comment['feedbackId']].comment"></p>
                                    </blockquote>
                                    <p class="ticketDuration text-xs-center" data-ng-hide="true">Open for 5h</p>
                                    <hr class="divider" data-ng-hide="isThereNoComment(reportFeedbacks[comment['date']][comment['feedbackId']].comment.length)">

                                    <button type="button" class="btn btn-secondary pullLeft text-muted" data-ng-click="phoneEmailText = getPhoneText(reportFeedbacks[comment['date']][comment['feedbackId']].user_phone,'');npDisplay='npDisplay';reportCallClick(reportFeedbacks[comment['date']][comment['feedbackId']].review_date_mil_time_in_pst,reportFeedbacks[comment['date']][comment['feedbackId']].netpulse_exerciser_UUID);" data-ng-hide="!isPhoneEmailAvailable(reportFeedbacks[comment['date']][comment['feedbackId']].user_phone)" data-ng-bind="callText"></button>

                                    <button type="button" class="btn btn-secondary pullLeft text-muted" data-ng-click="phoneEmailText = getEmailText(reportFeedbacks[comment['date']][comment['feedbackId']].user_email,'');npDisplay='npDisplay';reportEmailClick(reportFeedbacks[comment['date']][comment['feedbackId']].review_date_mil_time_in_pst,reportFeedbacks[comment['date']][comment['feedbackId']].netpulse_exerciser_UUID);" data-ng-hide="!isPhoneEmailAvailable(reportFeedbacks[comment['date']][comment['feedbackId']].user_email)" data-ng-bind="emailText"></button>

                                    <p class="clearBoth {{npDisplay}}"><a class="text-muted" data-ng-bind="phoneEmailText"></a></p>
                                </div>
                        </div>

                    </div>
                </div>

                </div>
            </div>
      </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- <script src="../compass-feedback/extras/jquery.2.1.min.js"></script> -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- <script src="../compass-feedback/extras/bootstrap.4.0.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script> -->
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-route.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-resource.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-cookies.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-sanitize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.0/angular-animate.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.2/ui-bootstrap-tpls.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.2/ui-bootstrap.min.js"></script> -->
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/1.1.3/angularfire.min.js"></script>
    <!-- <script src="https://cdn.rawgit.com/zenorocha/clipboard.js/master/dist/clipboard.min.js"></script> -->


    <!-- 3rd Party Modules-->
    <script type="text/javascript" src="js/dist/ngclipboard.min.js"></script>
    <script type="text/javascript" src="js/dist/angular-busy.min.js"></script>

    <!-- Application -->
    <!-- <script src="./js/app.js"></script> -->

    <!-- Controllers-->
    <script type="text/javascript" src="js/controllers/feedbackController.js"></script>

  </body>
</html>